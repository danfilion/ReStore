(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{129:function(t,e,r){"use strict";r.r(e),r.d(e,"history",(function(){return ft}));var n=r(0),c=r.n(n),a=r(33),o=r.n(a),i=(r(98),r(13)),s=r(67),j=r(168),l=r(192),u=r(169),h=r(14),d=r(39),b=r(170),x=r(171),O=r(172),p=r(162),g=r(175),f=r(176),m=r(160),v=r(177),y=r(84),E=r(63),k=r.n(E),C=r(37),T=r.n(C);T.a.defaults.baseURL="http://localhost:5000/api/";var w=function(t){return t.data};T.a.interceptors.response.use(function(){var t=Object(y.a)(k.a.mark((function t(e){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){return setTimeout(t,500)}));case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){var e=t.response,r=e.data;switch(e.status){case 400:if(r.errors){var n=[];for(var c in r.errors)r.errors[c]&&n.push(r.errors[c]);throw n.flat()}d.b.error(r.title);break;case 401:d.b.error(r.title);break;case 403:d.b.error("You are not allowed to do that!");break;case 500:ft.push({pathname:"/server-error",state:{error:r}})}return Promise.reject(t.response)}));var S=function(t){return T.a.get(t).then(w)},B={Catalog:{list:function(){return S("products")},details:function(t){return S("products/".concat(t))}},TestErrors:{get400Error:function(){return S("buggy/bad-request")},get401Error:function(){return S("buggy/unauthorised")},get404Error:function(){return S("buggy/not-found")},get500Error:function(){return S("buggy/server-error")},getValidationError:function(){return S("buggy/validation-error")}}},I=r(1);function F(){var t=Object(n.useState)([]),e=Object(i.a)(t,2),r=e[0],c=e[1];return Object(I.jsxs)(u.a,{children:[Object(I.jsx)(b.a,{gutterBottom:!0,variant:"h2",children:"Errors for testing purposes"}),Object(I.jsxs)(x.a,{fullWidth:!0,children:[Object(I.jsx)(O.a,{variant:"contained",onClick:function(){return B.TestErrors.get400Error().catch((function(t){return console.log(t)}))},children:"Test 400 Error"}),Object(I.jsx)(O.a,{variant:"contained",onClick:function(){return B.TestErrors.get401Error().catch((function(t){return console.log(t)}))},children:"Test 401 Error"}),Object(I.jsx)(O.a,{variant:"contained",onClick:function(){return B.TestErrors.get404Error().catch((function(t){return console.log(t)}))},children:"Test 404 Error"}),Object(I.jsx)(O.a,{variant:"contained",onClick:function(){return B.TestErrors.get500Error().catch((function(t){return console.log(t)}))},children:"Test 500 Error"}),Object(I.jsx)(O.a,{variant:"contained",onClick:function(){B.TestErrors.getValidationError().then((function(){return console.log("should not see this")})).catch((function(t){return c(t)}))},children:"Validation Error"})]}),r.length>0&&Object(I.jsxs)(p.a,{severity:"error",children:[Object(I.jsx)(g.a,{children:"Validation Errors"}),Object(I.jsx)(f.a,{children:r.map((function(t){return Object(I.jsx)(m.a,{children:Object(I.jsx)(v.a,{children:t})},t)}))})]})]})}var L=r(163),P=r(178),U=r(155);function z(t){var e=t.message,r=void 0===e?"Loading...":e;return Object(I.jsx)(L.a,{open:!0,invisible:!0,children:Object(I.jsxs)(U.a,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:[Object(I.jsx)(P.a,{size:100,color:"secondary"}),Object(I.jsx)(b.a,{variant:"h4",sx:{justifyContent:"center",position:"fixed",top:"60%"},children:r})]})})}var V=r(167),D=r(179),M=r(180),R=r(166),W=r(181),q=r(182),A=r(183),G=r(25);function J(t){var e=t.product;return Object(I.jsxs)(D.a,{children:[Object(I.jsx)(M.a,{avatar:Object(I.jsx)(R.a,{sx:{bgcolor:"secondary.main"},children:e.name.charAt(0).toUpperCase()}),title:e.name,titleTypographyProps:{sx:{fontWeight:"bold",color:"primary.main"}}}),Object(I.jsx)(W.a,{sx:{height:140,backgroundSize:"contain",bgcolor:"primary.light"},image:e.pictureUrl,title:e.name}),Object(I.jsxs)(q.a,{children:[Object(I.jsxs)(b.a,{gutterBottom:!0,color:"secondary",variant:"h5",children:["$",(e.price/100).toFixed(2)]}),Object(I.jsxs)(b.a,{variant:"body2",color:"text.secondary",children:[e.brand," / ",e.type]})]}),Object(I.jsxs)(A.a,{children:[Object(I.jsx)(O.a,{size:"small",children:"Add to cart"}),Object(I.jsx)(O.a,{component:G.a,to:"/catalog/".concat(e.id),size:"small",children:"View"})]})]})}function $(t){var e=t.products;return Object(I.jsx)(V.a,{container:!0,spacing:4,children:e.map((function(t){return Object(I.jsx)(V.a,{item:!0,xs:3,children:Object(I.jsx)(J,{product:t})},t.id)}))})}function H(){var t=Object(n.useState)([]),e=Object(i.a)(t,2),r=e[0],c=e[1],a=Object(n.useState)(!0),o=Object(i.a)(a,2),s=o[0],j=o[1];return Object(n.useEffect)((function(){B.Catalog.list().then((function(t){return c(t)})).catch((function(t){return console.log(t)})).finally((function(){return j(!1)}))}),[]),s?Object(I.jsx)(z,{message:"Loading products..."}):Object(I.jsx)(I.Fragment,{children:Object(I.jsx)($,{products:r})})}var N=r(184),Q=r(185),Y=r(186),K=r(187),X=r(188),Z=r(189),_=r(173);function tt(){return Object(I.jsxs)(u.a,{component:_.a,sx:{height:400},children:[Object(I.jsx)(b.a,{gutterBottom:!0,variant:"h3",children:"Oops - we could not find what you are looking for"}),Object(I.jsx)(N.a,{}),Object(I.jsx)(O.a,{fullWidth:!0,component:G.a,to:"/catalog",children:"Go back to shop"})]})}function et(){var t=Object(h.h)().id,e=Object(n.useState)(null),r=Object(i.a)(e,2),c=r[0],a=r[1],o=Object(n.useState)(!0),s=Object(i.a)(o,2),j=s[0],l=s[1];return Object(n.useEffect)((function(){B.Catalog.details(parseInt(t)).then((function(t){return a(t)})).catch((function(t){return console.log(t)})).finally((function(){return l(!1)}))}),[t]),j?Object(I.jsx)(z,{message:"Loading product..."}):c?Object(I.jsxs)(V.a,{container:!0,spacing:6,children:[Object(I.jsx)(V.a,{item:!0,xs:6,children:Object(I.jsx)("img",{src:c.pictureUrl,alt:c.name,style:{width:"100%"}})}),Object(I.jsxs)(V.a,{item:!0,xs:6,children:[Object(I.jsx)(b.a,{variant:"h3",children:c.name}),Object(I.jsx)(N.a,{sx:{mb:2}}),Object(I.jsxs)(b.a,{variant:"h4",color:"secondary",children:["$",(c.price/100).toFixed(2)]}),Object(I.jsx)(Q.a,{children:Object(I.jsx)(Y.a,{children:Object(I.jsxs)(K.a,{children:[Object(I.jsxs)(X.a,{children:[Object(I.jsx)(Z.a,{children:"Name"}),Object(I.jsx)(Z.a,{children:c.name})]}),Object(I.jsxs)(X.a,{children:[Object(I.jsx)(Z.a,{children:"Description"}),Object(I.jsx)(Z.a,{children:c.description})]}),Object(I.jsxs)(X.a,{children:[Object(I.jsx)(Z.a,{children:"Type"}),Object(I.jsx)(Z.a,{children:c.type})]}),Object(I.jsxs)(X.a,{children:[Object(I.jsx)(Z.a,{children:"Brand"}),Object(I.jsx)(Z.a,{children:c.brand})]}),Object(I.jsxs)(X.a,{children:[Object(I.jsx)(Z.a,{children:"Quantity in stock"}),Object(I.jsx)(Z.a,{children:c.quantityInStock})]})]})})})]})]}):Object(I.jsx)(tt,{})}function rt(){return Object(I.jsx)(b.a,{variant:"h2",children:"Contact page"})}function nt(){return Object(I.jsx)(b.a,{variant:"h2",children:"Home page"})}var ct=r(157),at=r(190),ot=r(191),it=r(156),st=r(161),jt=r(174),lt=r(164),ut=[{title:"catalog",path:"/catalog"},{title:"about",path:"/about"},{title:"contact",path:"/contact"}],ht=[{title:"login",path:"/login"},{title:"register",path:"/register"}],dt={color:"inherit",textDecoration:"none",typography:"h6","&:hover":{color:"grey.500"},"&.active":{color:"text.secondary"}};function bt(t){var e=t.darkMode,r=t.handleThemeChange;return Object(I.jsx)(at.a,{position:"static",sx:{mb:4},children:Object(I.jsxs)(ot.a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(I.jsxs)(it.a,{display:"flex",alignItems:"center",children:[Object(I.jsx)(b.a,{variant:"h6",component:G.b,to:"/",exact:!0,sx:dt,children:"RE-STORE"}),Object(I.jsx)(st.a,{checked:e,onChange:r})]}),Object(I.jsx)(f.a,{sx:{display:"flex"},children:ut.map((function(t){var e=t.title,r=t.path;return Object(I.jsx)(m.a,{component:G.b,to:r,sx:dt,children:e.toUpperCase()},r)}))}),Object(I.jsxs)(it.a,{display:"flex",alignItems:"center",children:[Object(I.jsx)(jt.a,{size:"large",sx:{color:"inherit"},children:Object(I.jsx)(lt.a,{badgeContent:4,color:"secondary",children:Object(I.jsx)(ct.a,{})})}),Object(I.jsx)(f.a,{sx:{display:"flex"},children:ht.map((function(t){var e=t.title,r=t.path;return Object(I.jsx)(m.a,{component:G.b,to:r,sx:dt,children:e.toUpperCase()},r)}))})]})]})})}r(128);function xt(){var t=Object(h.f)(),e=Object(h.g)().state;return Object(I.jsxs)(u.a,{component:_.a,children:[null!==e&&void 0!==e&&e.error?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(b.a,{variant:"h3",color:"error",gutterBottom:!0,children:e.error.title}),Object(I.jsx)(N.a,{}),Object(I.jsx)(b.a,{children:e.error.detail||"Internal server error"})]}):Object(I.jsx)(b.a,{variant:"h5",gutterBottom:!0,children:"Server Error"}),Object(I.jsx)(O.a,{onClick:function(){return t.push("/catalog")},children:"Go back to the store"})]})}var Ot=function(){var t=Object(n.useState)(!1),e=Object(i.a)(t,2),r=e[0],c=e[1],a=r?"dark":"light",o=Object(s.a)({palette:{mode:a,background:{default:"light"===a?"#eaeaea":"#121212"}}});return Object(I.jsxs)(j.a,{theme:o,children:[Object(I.jsx)(d.a,{position:"bottom-right",hideProgressBar:!0,theme:"colored"}),Object(I.jsx)(l.a,{}),Object(I.jsx)(bt,{darkMode:r,handleThemeChange:function(){c(!r)}}),Object(I.jsx)(u.a,{children:Object(I.jsxs)(h.c,{children:[Object(I.jsx)(h.a,{exact:!0,path:"/",component:nt}),Object(I.jsx)(h.a,{exact:!0,path:"/catalog",component:H}),Object(I.jsx)(h.a,{exact:!0,path:"/catalog/:id",component:et}),Object(I.jsx)(h.a,{exact:!0,path:"/about",component:F}),Object(I.jsx)(h.a,{exact:!0,path:"/contact",component:rt}),Object(I.jsx)(h.a,{path:"/server-error",component:xt}),Object(I.jsx)(h.a,{component:tt})]})})]})},pt=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,193)).then((function(e){var r=e.getCLS,n=e.getFID,c=e.getFCP,a=e.getLCP,o=e.getTTFB;r(t),n(t),c(t),a(t),o(t)}))},gt=r(20),ft=Object(gt.a)();o.a.render(Object(I.jsx)(c.a.StrictMode,{children:Object(I.jsx)(h.b,{history:ft,children:Object(I.jsx)(Ot,{})})}),document.getElementById("root")),pt()},98:function(t,e,r){}},[[129,1,2]]]);
//# sourceMappingURL=main.3e8f7832.chunk.js.map